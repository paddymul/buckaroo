import{j as s}from"./jsx-runtime-DiklIkkE.js";/* empty css                */import{r as u}from"./index-DRjF_FHU.js";import{_ as i}from"./lodash-CGIzQN7T.js";import{A as z,M as J,C as L}from"./main.esm-B4lyadPg.js";import{b as _,m as W}from"./DFViewerInfinite-CH5RP8Q2.js";import"./index-DHHUZ-3A.js";import"./HistogramCell-DpbV8qWt.js";import"./ChartCell-lxLhA7NV.js";import"./tiny-invariant-CopsF_GD.js";J.registerModules([L]);const Q=function(e){return s.jsx("a",{href:"https://buckaroo-data.readthedocs.io/en/latest/feature_reference.html",target:"_blank",rel:"noopener noreferrer",children:"?"})},U=function(e){const o=e.value,n=e.context.buckarooOptions.df_display,c=t=>{const r=i.clone(e.context.buckarooState);r.df_display=t.target.value,e.context.setBuckarooState(r)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:n.map(t=>s.jsx("option",{value:t,children:t},t))})},Y=function(e){const o=e.value,n=e.context.buckarooOptions.cleaning_method,c=t=>{const r=i.clone(e.context.buckarooState);r.cleaning_method=t.target.value,e.context.setBuckarooState(r)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:n.map(t=>s.jsx("option",{value:t,children:t},t))})},Z=function(e){const o=e.value,n=e.context.buckarooOptions.post_processing,c=t=>{const r=i.clone(e.context.buckarooState);r.post_processing=t.target.value,e.context.setBuckarooState(r)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:n.map(t=>s.jsx("option",{value:t,children:t},t))})},$=function(e){const o=e.value==="1",n=c=>{const t=i.clone(e.context.buckarooState);t.show_commands=c.target.checked?"1":"0",e.context.setBuckarooState(t)};return s.jsx("input",{type:"checkbox",checked:o,onChange:n,style:{margin:"0 auto",display:"block"}})},N=function(e){const o=e.value,[n,c]=u.useState(o||""),t=()=>{e.setValue(n===""?null:n)},r=l=>{l.key==="Enter"&&(l.preventDefault(),t())};return s.jsxs("div",{className:"FakeSearchEditor",tabIndex:1,style:{display:"flex",flexDirection:"row"},children:[s.jsx("input",{type:"text",style:{flex:"auto",width:133},value:n,onChange:({target:{value:l}})=>c(l),onSubmit:t,onKeyDown:r}),s.jsx("button",{style:{flex:"none"},onClick:t,children:"ðŸ”"}),s.jsx("button",{style:{flex:"none"},onClick:l=>{console.log("clickParams",l),e.setValue("")},children:"X"})]})},R=u.memo(({value:e,onValueChange:o,stopEditing:n})=>{const[c,t]=u.useState(!1),r=u.useRef(null);return u.useEffect(()=>{var l;(l=r.current)==null||l.focus(),t(!0)},[]),s.jsxs("div",{className:"SearchEditor",ref:r,tabIndex:1,style:{display:"flex",flexDirection:"row"},children:[s.jsx("input",{type:"text",style:{flex:"auto",width:150},value:e||"",onChange:({target:{value:l}})=>o(l===""?null:l)}),s.jsx("button",{style:{flex:"none"},onClick:()=>{o(""),n()},children:"X"})]})});function B({dfMeta:e,buckarooState:o,setBuckarooState:n,buckarooOptions:c,heightOverride:t}){var x;const r=c,l=i.fromPairs(i.map(i.keys(r),a=>[a,i.indexOf(r[a],o[a])])),D=(a,d)=>a===d.length-1?0:a+1,P=a=>{const d=r[a],m=l[a],g=D(m,d),X=d[g],y=i.clone(o);return y[a]=X,y},E=["quick_command_args","search","show_displayed_rows"],I=a=>{console.log("event.column",a.column,a.column.getColId());const d=a.column.getColId();if(!i.includes(E,d)&&i.includes(i.keys(o),d)){const m=P(d);n(m)}},q=u.useCallback(a=>{const{oldValue:d,newValue:m}=a;if(d!==m&&m!==null){const g={...o,quick_command_args:{search:[m]}};n(g)}},[]),M=[{field:"search",headerName:"search",width:200,cellEditor:R,cellRenderer:N,onCellValueChanged:q},{field:"df_display",headerName:"Î£",headerTooltip:"Summary Stats",width:120,cellRenderer:U},{field:"post_processing",headerName:"post processing",headerTooltip:"post process method",width:100,cellRenderer:Z},{field:"show_commands",headerName:"Î»",headerTooltip:"Show Commands",width:30,cellRenderer:$},{field:"cleaning_method",headerName:"cleaning",headerTooltip:"Auto cleaning method",width:80,cellRenderer:Y},{field:"help",headerName:"?",headerTooltip:"Help",width:30,cellRenderer:Q},{field:"total_rows",width:100},{field:"filtered_rows",headerName:"filtered",width:85},{field:"rows_shown",headerName:"displayed",width:85,hide:e.rows_shown===-1},{field:"columns",width:75}],f=(x=o.quick_command_args)==null?void 0:x.search,V=f&&f.length===1?f[0]:"",A=[{total_rows:_.format(e.total_rows),columns:e.columns,rows_shown:_.format(e.rows_shown),cleaning_method:o.cleaning_method||"0",df_display:o.df_display,filtered_rows:_.format(e.filtered_rows),post_processing:o.post_processing,show_commands:o.show_commands||"0",search:V}],F={suppressRowClickSelection:!0},G=u.useRef(null),w=u.useCallback(a=>{console.log("StatusBar252 onGridReady statusbar",a)},[]),H={sortable:!1,cellStyle:{textAlign:"left"}},K=u.useMemo(()=>W.withParams({headerFontSize:14,rowVerticalPaddingScale:.8}),[]);return s.jsx("div",{className:"status-bar",children:s.jsx("div",{className:"theme-hanger ag-theme-alpine-dark",children:s.jsx(z,{ref:G,theme:K,loadThemeGoogleFonts:!0,onCellEditingStopped:w,onColumnHeaderClicked:I,onGridReady:w,gridOptions:F,defaultColDef:H,rowData:A,domLayout:"autoHeight",columnDefs:M,context:{buckarooState:o,setBuckarooState:n,buckarooOptions:c}})})})}N.__docgenInfo={description:"",methods:[],displayName:"fakeSearchCell"};R.__docgenInfo={description:"",methods:[],displayName:"SearchEditor"};B.__docgenInfo={description:"",methods:[],displayName:"StatusBar",props:{dfMeta:{required:!0,tsType:{name:"DFMeta"},description:""},buckarooState:{required:!0,tsType:{name:"BuckarooState"},description:""},setBuckarooState:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<BuckarooState>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<BuckarooState>",elements:[{name:"BuckarooState"}]}]},description:""},buckarooOptions:{required:!0,tsType:{name:"BuckarooOptions"},description:""},heightOverride:{required:!1,tsType:{name:"number"},description:""}}};const ee=({dfMeta:e,buckarooState:o,buckarooOptions:n})=>{const[c,t]=u.useState(o);return s.jsxs("div",{className:"dcf-root flex flex-col",style:{width:"800px",height:"300px",border:"1px solid red"},children:[s.jsx("div",{className:"orig-df",style:{overflow:"hidden"},children:s.jsx(B,{dfMeta:e,buckarooState:c,setBuckarooState:t,buckarooOptions:n,heightOverride:150})}),s.jsxs("pre",{children:[" ",JSON.stringify(c,void 0,4)]})]})},me={title:"Buckaroo/StatusBar",component:ee,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},O={total_rows:378,columns:7,filtered_rows:297,rows_shown:297},te={sampled:["sample_strat1","sample_strat2",""],cleaning_method:["clean_strat1","clean_strat2",""],post_processing:["","post1","post2"],df_display:["main","summary"],show_commands:["on","off"]},T={sampled:!1,cleaning_method:!1,quick_command_args:{},post_processing:!1,df_display:"main",show_commands:!1},h={args:{dfMeta:O,buckarooState:T,buckarooOptions:te}},p={args:{dfMeta:O,buckarooState:T,buckarooOptions:{sampled:["sample_strat1","sample_strat2",""],cleaning_method:[],post_processing:[],df_display:["main","summary"],show_commands:["on","off"]}}};var S,k,b;h.parameters={...h.parameters,docs:{...(S=h.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {
    dfMeta: dfm,
    buckarooState: bs,
    buckarooOptions: bo
  }
}`,...(b=(k=h.parameters)==null?void 0:k.docs)==null?void 0:b.source}}};var C,v,j;p.parameters={...p.parameters,docs:{...(C=p.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    dfMeta: dfm,
    buckarooState: bs,
    buckarooOptions: {
      sampled: ["sample_strat1", "sample_strat2", ""],
      cleaning_method: [],
      post_processing: [],
      df_display: ["main", "summary"],
      show_commands: ["on", "off"]
    }
  }
}`,...(j=(v=p.parameters)==null?void 0:v.docs)==null?void 0:j.source}}};const he=["Primary","NoCleaningNoPostProcessing"];export{p as NoCleaningNoPostProcessing,h as Primary,he as __namedExportsOrder,me as default};
